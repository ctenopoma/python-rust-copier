use pyo3::exceptions::PyValueError;
use pyo3::Python;

use {{ package_name | replace('-', '_') }}_native::{add_numbers, validate_name};

#[test]
fn adds_numbers_in_native_module() {
    Python::with_gil(|_| {
        let sum = add_numbers(2, 3).expect("native add_numbers should succeed");
        assert_eq!(sum, 5);
    });
}

#[test]
fn rejects_blank_names_with_value_error() {
    Python::with_gil(|py| {
        let err = validate_name("   ".into()).expect_err("blank names should fail");
        assert!(err.is_instance_of::<PyValueError>(py));
    });
}
