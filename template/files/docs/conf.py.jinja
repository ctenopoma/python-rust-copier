import os
import sys
from datetime import datetime
from pathlib import Path

PROJECT_ROOT = Path(__file__).resolve().parents[1]
sys.path.insert(0, PROJECT_ROOT.as_posix())

project = "{{ project_name }}"
author = "{{ author }}"
copyright = f"{datetime.utcnow().year}, {author}"
release = "{{ version }}"

extensions = [
    "sphinx.ext.autodoc",
    "sphinx.ext.napoleon",
    "sphinx.ext.viewcode",
]

templates_path = ["_templates"]
exclude_patterns: list[str] = ["_build", "Thumbs.db", ".DS_Store"]

html_theme = "alabaster"
html_static_path: list[str] = []

napoleon_google_docstring = True
autodoc_typehints = "description"
autodoc_member_order = "bysource"

# Allow docs to build before the PyO3 extension is compiled.
autodoc_mock_imports = ["{{ package_name | replace('-', '_') }}_native"]

on_ci = os.environ.get("CI", "false").lower() == "true"
if on_ci:
    os.environ.setdefault("UV_LINK_MODE", "copy")
